<!--======================================== EXTERNAL STYLES & CALENDAR ICON========================================-->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">

<link rel="stylesheet" href="https://cpano.github.io/tutorials-devo/public/css/TutorialsStyles.css">


<!--========================================HEADER========================================-->
<!-- CC01v0 -->
<section style="background-image:url(/a/devo/images/cc01-weblogic-hero-banner.jpg);" class="cc01 cc01v0  txtlight cpad">
    <div class="cc01w1 cwidth">

        <h1>How to Deploy Spark Standalone in Oracle Cloud (OCI)</h1>
        <p>The following walk-through guides you through the steps needed to set up your environment to run Spark and Hadoop in Oracle Cloud Infrastructure.</p>

        <div style="display: flex; color: white;">
            <p class="page__date" style="margin-right: 25px;"><strong><i class="fas fa-user fa-calendar-alt"
                        aria-hidden="true"></i>
                    Author: </strong>
                Olivier Francois Xavier Perard
            </p>

            <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i>
                    Updated:</strong>
                <time>September 30, 2021</time>
            </p>
        </div>

    </div>
</section>
<!-- /CC01v0 -->

<!-- F19v0 -->
<section class="f19 f19v0 cpad">
    <div class="f19w1 cwidth">
        <div class="f19w2 f19-2col">
            <div class="f19col f19side">
                <!-- S20v0 -->
                <section class="s20 s20v0 cpad" data-ocomid="s20" data-trackas="s20">
                    <div class="s20w1 cwidth">
                        <div class="col-w1">
                            <h3>Steps</h3>
                            <div class="s20w2">
                                <ul>

                                    <!--<li><strong><a href="#link0">Intro</a></strong></li>-->
                                    <li><strong><a href="#link1">1. Intro</a></strong></li>
                                    <!--
                                    <li style="margin-left:15px;"><a href="#link1s1">Data</a></li>
                                    <li style="margin-left:15px;"><a href="#link1s2">Environments</a></li>
                                    -->
                                    <li><strong><a href="#slide-1">2. Prerequisites</a></strong></li>
                                    <li><strong><a href="#slide-2">3. Java Installation</a></strong></li>
                                    <li><strong><a href="#slide-3">4. Spark and Hadoop Setup</a></strong></li>
                                    <li><strong><a href="#slide-4">5. Install PySpark in Python3
                                                environment</a></strong></li>
                                    <li><strong><a href="#slide-5">6. Test your Spark and Hadoop
                                                Environment</a></strong></li>

                                    <br />

                                </ul>
                            </div>

                            <h3>About Olivier Francois Xavier Perard</h3>

                            <!--Social Icons-->
                            <div class="author__urls-wrapper" style="margin-bottom: 15px;">
                                <ul class="author__urls social-icons">
                                    <li>
                                        <a href="https://twitter.com/olivier_perard" itemprop="sameAs"
                                            rel="nofollow noopener noreferrer" target="_blank">
                                            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span
                                                class="label">Twitter</span>
                                        </a>
                                    </li>

                                    <li>
                                        <a href="https://www.linkedin.com/in/olivier-perard/" itemprop="sameAs"
                                            rel="nofollow noopener noreferrer" target="_blank">
                                            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span
                                                class="label">LinkedIn</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://github.com/operard" itemprop="sameAs"
                                            rel="nofollow noopener noreferrer" target="_blank">
                                            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span
                                                class="label">GitHub</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <br><br>
                            <!-- End Social Icons-->

                            <p><strong>More tutorials from this author: <br> </strong>
                                <span class="tags">

                                    <li><a class="animated-link tag2" href="/tutorials/deploy-cassandra-on-oci">Deploy
                                            Cassandra on Oracle Cloud (OCI) Linux VM</a></li>

                                    <li><a class="animated-link tag2"
                                            href="/tutorials/deploy-mongodb-oci-linux-vm">Deploying MongoDB in Oracle
                                            Cloud (OCI) Linux VM</a></li>

                                    <li><a class="animated-link tag2" href="/tutorials/hops-works-logicalclocks">Get
                                            Started with the Feature Store HopsWorks (LogicalClocks) on Oracle Cloud</a>
                                    </li>

                                    <li><a class="animated-link tag2" href="/tutorials/how-to-deploy-spark-oci">How to
                                            Deploy Spark Standalone in Oracle Cloud (OCI)</a></li>

                                </span>
                            </p>

                            <!--Tags-->
                            <h3>Tags</h3>
                            <p> <span class=" tags">
                                    <a class="animated-link tag" href="#">oci</a>
                                    <a class="animated-link tag" href="#">spark</a>
                                    <a class="animated-link tag" href="#">open-source</a>
                                    <a class="animated-link tag" href="#">java</a>
                                    <a class="animated-link tag" href="#">data-science</a>
                                </span>
                            </p>

                            <h3></h3>
                            <a href="https://developer.oracle.com/tutorials">
                                <p class="page__date" style="margin-right: 25px;"><strong>
                                        Back to tutorials
                                    </strong>
                                </p>
                            </a>

                        </div>
                    </div>
                </section> <!-- /S20v0 -->
            </div> <!-- SET UP -->
            <main class="f19col f19main">


                <!-- cc01v0 -->
                <section class="cc01 cc01v0 cpad">
                    <div class="cc01w1 cwidth">



                        <h2 class="slide__title"><span class="slide__num">1</span> Introduction</h2>

                        <p>The following walk-through guides you through the steps needed to set up your environment to
                            run Spark and Hadoop in Oracle Cloud Infrastructure.</p>

                    </div>

                    <div class="slide" id="slide-1">

                        <h2 class="slide__title"><span class="slide__num">2</span> Prerequisites</h2>

                        <p>You have deployed a VM 2.1 or + with Oracle Linux 7.9 (OEL7) in Oracle Cloud Infrastructure
                            (OCI).</p>

                        <ul>
                            <li>The installation of Oracle Linux 7.9 is using a JVM by default.</li>
                            <li>You have access to root either directly or via sudo. By default in OCI, you are
                                connected like “opc” user with sudo privilege.</li>
                        </ul>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">    [opc@xxx ~]$</span><span class="w"> </span>java <span class="nt">-version</span>
                    <span class="go">    java version "1.8.0_281"
                        Java(TM) SE Runtime Environment (build 1.8.0_281-b09)
                        Java HotSpot(TM) 64-Bit Server VM (build 25.281-b09, mixed mode)
                    </span></code></pre>
                            </div>
                        </div>

                    </div>

                    <div class="slide" id="slide-2">

                        <h2 class="slide__title"><span class="slide__num">3</span> Java Installation</h2>

                        <p>The install is quite simple. It consists of setting up Java, installing Spark and Hadoop
                            components and libraries. Lets start with setting up the Spark and Hadoop environment.</p>

                        <p>Download the last version of JDK 1.8 because Hadoop 2.X is using this Java version.</p>
                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="go">rpm -ivh /home/opc/jdk-8u271-linux-x64.rpm
                    </span></code></pre>
                            </div>
                        </div>

                        <p>Check Java Version.</p>
                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="go">java -version
                    </span></code></pre>
                            </div>
                        </div>

                    </div>

                    <div class="slide" id="slide-3">

                        <h2 class="slide__title"><span class="slide__num">4</span> Spark and Hadoop Setup</h2>

                        <p>The next step is to install Spark and Hadoop environment.</p>

                        <p>First, choose the version of Spark and Hadoop you want to install. Then, download the version
                            you want to install:</p>

                        <h3 id="download-spark-245-for-hadoop-27">Download Spark 2.4.5 for Hadoop 2.7</h3>
                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="go">cd /home/opc
                    wget http://apache.uvigo.es/spark/spark-2.4.5/spark-2.4.5-bin-hadoop2.7.tgz
                    </span></code></pre>
                            </div>
                        </div>

                        <h3 id="download-spark-247-for-hadoop-27">Download Spark 2.4.7 for Hadoop 2.7</h3>
                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="go">wget http://apache.uvigo.es/spark/spark-2.4.7/spark-2.4.7-bin-hadoop2.7.tgz
                    </span></code></pre>
                            </div>
                        </div>

                        <h3 id="download-spark-311-for-hadoop-32">Download Spark 3.1.1 for Hadoop 3.2</h3>
                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="go">wget http://apache.uvigo.es/spark/spark-3.1.1/spark-3.1.1-bin-hadoop3.2.tgz
                    </span></code></pre>
                            </div>
                        </div>

                        <h3 id="install-the-spark-and-hadoop-version">Install the Spark and Hadoop Version</h3>

                        <p>Install the Spark and Hadoop Version choosen in the directory “/opt”.</p>
                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="go">sudo -i
                    cd /opt
                    tar -zxvf /home/opc/spark-2.4.5-bin-hadoop2.7.tgz
                    </span><span class="gp">#</span>or 
                    <span class="go">tar -zxvf /home/opc/spark-2.4.7-bin-hadoop2.7.tgz
                    </span><span class="gp">#</span>or
                    <span class="go">tar -zxvf /home/opc/spark-3.1.1-bin-hadoop3.2.tgz
                    </span></code></pre>
                            </div>
                        </div>

                    </div>

                    <div class="slide" id="slide-4">

                        <h2 class="slide__title"><span class="slide__num">5</span> Install PySpark in Python3
                            environment</h2>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="go">/opt/Python-3.7.6/bin/pip3 install 'pyspark=2.4.7'
                    /opt/Python-3.7.6/bin/pip3 install findspark
                    </span></code></pre>
                            </div>
                        </div>

                        <p>Next we shall create a virtual environment and enable it.</p>

                        <h3 id="modify-your-environment-to-use-this-spark-and-hadoop-version">Modify your environment to
                            use this Spark and Hadoop Version</h3>

                        <p>Add to “.bashrc” for the user “opc” the following lines:</p>
                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>Add by %OP%
                    <span class="go">export PYTHONHOME=/opt/anaconda3
                    </span><span class="gp">export PATH=$</span>PYTHONHOME/bin:<span class="nv">$PYTHONHOME</span>/condabin:<span class="nv">$PATH</span>
                    <span class="go">
                    </span><span class="gp">#</span><span class="w"> </span>SPARK ENV
                    <span class="gp">#</span><span class="nb">export </span><span class="nv">JAVA_HOME</span><span class="o">=</span><span class="si">$(</span>/usr/libexec/java_home<span class="si">)</span>
                    <span class="go">export SPARK_HOME=/opt/spark-2.4.5-bin-hadoop2.7
                    </span><span class="gp">export PATH=$</span>SPARK_HOME/bin:<span class="nv">$PATH</span>
                    <span class="go">export PYSPARK_PYTHON=python3
                    
                    export PYSPARK_DRIVER_PYTHON=jupyter
                    export PYSPARK_DRIVER_PYTHON_OPTS='notebook'
                    </span></code></pre>
                            </div>
                        </div>

                    </div>

                    <div class="slide" id="slide-5">

                        <h2 class="slide__title"><span class="slide__num">6</span> Test your Spark and Hadoop
                            Environment</h2>

                        <p>If you’re running directly on a virtual machine and have a browser installed it should take
                            you directly into the jupyter environment. Connect to your “<a
                                href="http://xxx.xxx.xxx.xxx:8001/">http://xxx.xxx.xxx.xxx:8001/</a>”.</p>

                        <p>And upload the next notebooks:</p>

                        <ul>
                            <li><a
                                    href="https://github.com/operard/oracle-cloud-tutorial/blob/main/notebooks/Test_findSpark.ipynb">Notebook
                                    test findspark</a>.</li>
                            <li><a
                                    href="https://github.com/operard/oracle-cloud-tutorial/blob/main/notebooks/Test%20PySpark.ipynb">Notebook
                                    test Pyspark</a>.</li>
                            <li><a
                                    href="https://github.com/operard/oracle-cloud-tutorial/blob/main/notebooks/Test_PySpark_Mysql.ipynb">Notebook
                                    test Pyspark with Mysql</a>.</li>
                        </ul>
                    </div>
                </section>
                <!-- /cc01v0 -->
            </main>
        </div>
    </div>
</section> <!-- /F19v0 -->