<!--======================================== EXTERNAL STYLES & CALENDAR ICON========================================-->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">

<link rel="stylesheet" href="https://cpano.github.io/tutorials-devo/public/css/TutorialsStyles.css">


<!--========================================HEADER========================================-->
<!-- CC01v0 -->
<section style="background-image:url(/a/devo/images/cc01-weblogic-hero-banner.jpg);" class="cc01 cc01v0  txtlight cpad">
    <div class="cc01w1 cwidth">

        <h1>Installation Guide for OCI Monitoring</h1>
        <p>In this walkthrough you’ll install a basic OCI monitoring solution with these components based on Ansible in
            Oracle Linux 8.</p>

        <div style="display: flex; color: white;">
            <p class="page__date" style="margin-right: 25px;"><strong><i class="fas fa-user fa-calendar-alt"
                        aria-hidden="true"></i>
                    Author: </strong>
                Martin Berger
            </p>

            <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i>
                    Updated:</strong>
                <time>November 18, 2021</time>
            </p>

        </div>

    </div>
</section>
<!-- /CC01v0 -->

<!-- F19v0 -->
<section class="f19 f19v0 cpad">
    <div class="f19w1 cwidth">
        <div class="f19w2 f19-2col">
            <div class="f19col f19side">
                <!-- S20v0 -->
                <section class="s20 s20v0 cpad" data-ocomid="s20" data-trackas="s20">
                    <div class="s20w1 cwidth">
                        <div class="col-w1">
                            <h3>Steps to follow</h3>
                            <div class="s20w2">
                                <ul>

                                    <!--<li><strong><a href="#link0">Intro</a></strong></li>-->
                                    <li><strong><a href="#link1">1. Intro</a></strong></li>
                                    <!--
                                    <li style="margin-left:15px;"><a href="#link1s1">Data</a></li>
                                    <li style="margin-left:15px;"><a href="#link1s2">Environments</a></li>
                                    -->
                                    <li><strong><a href="#slide-1">2. Links</a></strong></li>
                                    <li><strong><a href="#slide-2">3. How it works</a></strong></li>
                                    <li><strong><a href="#slide-3">4. Prerequisites</a></strong></li>
                                    <li><strong><a href="#slide-4">5. Steps</a></strong></li>
                                    <li><strong><a href="#slide-5">6. OCI Configuration</a></strong></li>
                                    <li><strong><a href="#slide-6">7. How to create the user for OCI access - based on
                                                OCI CLI</a></strong></li>
                                    <li><strong><a href="#slide-7">8. Steampipe</a></strong></li>
                                    <li><strong><a href="#slide-8">9. Python Example Scripts</a></strong></li>
                                    <li><strong><a href="#slide-9">10. Prometheus Push Gateway</a></strong></li>
                                    <li><strong><a href="#slide-10">11. Grafana</a></strong></li>
                                    <li><strong><a href="#slide-11">12. Troubleshooting</a></strong></li>
                                    <br />

                                </ul>
                            </div>

                            <h3>About Martin Berger</h3>

                            <!--Social Icons-->
                            <div class="author__urls-wrapper" style="margin-bottom: 15px;">
                                <ul class="author__urls social-icons">
                                    <li>
                                        <a href="https://github.com/martinberger-ch" itemprop="sameAs"
                                            rel="nofollow noopener noreferrer" target="_blank">
                                            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span
                                                class="label">GitHub</span>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <br><br>
                            <!-- End Social Icons-->

                            <!--Tags-->
                            <h3>Tags</h3>
                            <p> <span class=" tags">
                                    <a class="animated-link tag" href="#">ansible</a>
                                    <a class="animated-link tag" href="#">data-visualization</a>
                                    <a class="animated-link tag" href="#">data-management</a>
                                    <a class="animated-link tag" href="#">back-end</a>
                                </span>
                            </p>

                            <h3></h3>
                            <a href="https://developer.oracle.com/tutorials">
                                <p class="page__date" style="margin-right: 25px;"><strong>
                                        Back to tutorials
                                    </strong>
                                </p>
                            </a>

                        </div>
                    </div>
                </section> <!-- /S20v0 -->
            </div> <!-- SET UP -->
            <main class="f19col f19main">


                <!-- cc01v0 -->
                <section class="cc01 cc01v0 cpad">
                    <div class="cc01w1 cwidth">


                        <h2 class="slide__title"><span class="slide__num">1</span> Introduction</h2>

                        <h1 id="an-installation-guide-for-oci-monitoring">An Installation Guide for OCI Monitoring</h1>

                        <blockquote class="notice">
                            <p><strong>Note:</strong> This is an experimental environment. Feel free to try it out,
                                extend it, and have fun with it!</p>
                        </blockquote>

                        <p>In this walkthrough you’ll install a basic OCI monitoring solution with these components
                            based on Ansible in Oracle Linux 8. The setup is tested for:</p>

                        <ul>
                            <li>OL8 running in ESXi</li>
                            <li>OL8 running in local VMware Workstation with NAT</li>
                            <li>OL8 running in Oracle Cloud Infrastructure</li>
                        </ul>

                        <p>Installed components by Ansible roles:</p>

                        <ul>
                            <li>Docker</li>
                            <li>Steampipe</li>
                            <li>Grafana</li>
                            <li>Prometheus</li>
                            <li>Push Gateway</li>
                            <li>PostgreSQL</li>
                        </ul>

                    </div>

                    <div class="slide" id="slide-1">

                        <h2 class="slide__title"><span class="slide__num">2</span> Links</h2>

                        <ul>
                            <li><a href="https://steampipe.io/">Steampipe</a></li>
                            <li><a href="https://prometheus.io/">Prometheus</a></li>
                            <li><a href="https://grafana.com/">Grafana</a></li>
                            <li><a
                                    href="https://docs.oracle.com/en-us/iaas/Content/API/Concepts/cliconcepts.htm?source=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK211125P00018:WW_FY22_DevRel_DotBuild&pcode=WWMK211125P00018">OCI
                                    CLI</a></li>
                        </ul>


                    </div>

                    <div class="slide" id="slide-2">

                        <h2 class="slide__title"><span class="slide__num">3</span> How it works</h2>

                        <figure class="">
                            <picture>
                                <source srcset="https://cool.devo.build/tutorials/assets/oci-monitoring-architecture.png 1x" />
                                <img loading="lazy" src="https://cool.devo.build/tutorials/assets/oci-monitoring-architecture.png"
                                    data-original="https://cool.devo.build/tutorials/assets/oci-monitoring-architecture.png"
                                    data-at2x="https://cool.devo.build/tutorials/assets/oci-monitoring-architecture@2x.png" title="Architecture"
                                    alt="Architecture Overview" />
                            </picture>
                            <figcaption>Architecture</figcaption>
                        </figure>

                        <ol>
                            <li>Execute the Python script</li>
                            <li>Steampipe gathers the information from Oracle Cloud Infrastructure</li>
                            <li>The return value is pushed to Prometheus Push Gateway</li>
                            <li>Prometheus scrapes the metrics from the gateway</li>
                            <li>Grafana reads the metrics from Prometheus</li>
                        </ol>


                    </div>

                    <div class="slide" id="slide-3">

                        <h2 class="slide__title"><span class="slide__num">4</span> Prerequisites</h2>

                        <ul>
                            <li>root access by password</li>
                            <li><code class="language-plaintext highlighter-rouge">/etc/hosts</code> configured</li>
                            <li>Ansible and Git configured</li>
                            <li>Internet access</li>
                            <li>Oracle Cloud Infrastructure user with inspect permissions, including SSH PEM key and
                                configuration</li>
                        </ul>

                        <h3 id="software-installation-ol8-esxi--ol8-vmware">Software Installation OL8 ESXi / OL8 VMware
                        </h3>

                        <p>As user <code class="language-plaintext highlighter-rouge">root</code>:</p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>yum <span class="nt">-y</span> <span class="nb">install </span>yum-utils
                    <span class="gp">$</span><span class="w"> </span>yum <span class="nt">-y</span> <span class="nb">install </span>oracle-epel-release-el8
                    <span class="gp">$</span><span class="w"> </span>yum-config-manager <span class="nt">--enable</span> ol8_developer_EPEL
                    <span class="gp">$</span><span class="w"> </span>yum <span class="nt">-y</span> <span class="nb">install </span>ansible git
                    </code></pre>
                            </div>
                        </div>

                        <h3 id="software-installation-ol8-oracle-cloud-infrastructure">Software Installation OL8 Oracle
                            Cloud Infrastructure</h3>

                        <p>As user <code class="language-plaintext highlighter-rouge">opc</code>:</p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>dnf upgrade
                    <span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>dnf <span class="nt">-y</span> <span class="nb">install </span>oracle-epel-release-el8
                    <span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>dnf config-manager <span class="nt">--enable</span> ol8_developer_EPEL
                    <span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>dnf <span class="nt">-y</span> <span class="nb">install </span>ansible git
                    </code></pre>
                            </div>
                        </div>

                        <h3 id="ansible-ssh-configuration-for-oracle-cloud-infrastructure">Ansible SSH Configuration for
                            Oracle Cloud Infrastructure</h3>

                        <ul>
                            <li>Upload the <code class="language-plaintext highlighter-rouge">opc</code>’s SSH private
                                key to <code class="language-plaintext highlighter-rouge">/home/opc/.ssh</code>
                                temporarily for installaton purposes</li>
                            <li>
                                <p>Change the Ansible checked out hosts file to:</p>

                                <div class="language-console highlighter-rouge">
                                    <div class="highlight">
                                        <pre class="highlight"><code><span class="go">  [all:vars]
                    </span><span class="gp">  ansible_ssh_private_key_file=/home/opc/.ssh/&lt;your_ssh_key_file_name_here&gt;</span><span class="w">
                    </span><span class="go">
                      [monitoring]
                    </span><span class="gp">  &lt;your_oci_compute_private_instance_here&gt;</span><span class="w"> </span><span class="nv">ansible_user</span><span class="o">=</span>opc <span class="nv">ansible_python_interpreter</span><span class="o">=</span><span class="s2">"/usr/bin/env python3"</span>
                    </code></pre>
                                    </div>
                                </div>
                            </li>
                        </ul>

                        <blockquote class="alert">
                            <p>After the installation, it’s a good practice to remove the opc private key from your
                                compute instance</p>
                        </blockquote>


                    </div>

                    <div class="slide" id="slide-4">

                        <h2 class="slide__title"><span class="slide__num">5</span> Steps</h2>

                        <ol>
                            <li>Login to Oracle Linux 8 as <code
                                    class="language-plaintext highlighter-rouge">root</code></li>
                            <li>Clone the repository to a local folder such as <code
                                    class="language-plaintext highlighter-rouge">/root/git</code></li>
                            <li>Change to subdirectory <code
                                    class="language-plaintext highlighter-rouge">oci-monitoring</code></li>
                            <li>Update the Ansible <code class="language-plaintext highlighter-rouge">hosts</code> file
                                with your IP and root password. <code
                                    class="language-plaintext highlighter-rouge">ansible_ssh_pass</code> is required for
                                local connections</li>
                            <li>Run <code
                                    class="language-plaintext highlighter-rouge">ansible-galaxy collection install -r roles/requirements.yml</code>
                            </li>
                            <li>Run <code
                                    class="language-plaintext highlighter-rouge">ansible-playbook install.yml</code>
                            </li>
                        </ol>

                        <p>As <code class="language-plaintext highlighter-rouge">root</code>, verify that all Docker
                            containers are running:</p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker ps
                    <span class="go">CONTAINER ID   IMAGE              COMMAND                  CREATED             STATUS             PORTS                    NAMES
                    </span><span class="gp">f7f2e137f4a1   prom/pushgateway   "/bin/pushgateway"       About an hour ago   Up About an hour   0.0.0.0:9091-&gt;</span>9091/tcp   pushgateway
                    <span class="gp">c6ecc72065c9   prom/prometheus    "/bin/prometheus --c…"   About an hour ago   Up About an hour   0.0.0.0:9090-&gt;</span>9090/tcp   prometheus
                    <span class="gp">3485de8cc1f9   grafana/grafana    "/run.sh"                About an hour ago   Up About an hour   0.0.0.0:3000-&gt;</span>3000/tcp   grafana
                    <span class="gp">8e821aa0044b   turbot/steampipe   "docker-entrypoint.s…"   About an hour ago   Up 30 minutes      0.0.0.0:9193-&gt;</span>9193/tcp   steampipe
                    </code></pre>
                            </div>
                        </div>

                        <h3 id="network-security">Network Security</h3>

                        <p>The Ansible playbooks also open these ports in the VM for troubleshooting access:</p>

                        <ul>
                            <li>3000 - Grafana</li>
                            <li>9090 - Prometheus</li>
                            <li>9091 - Prometheus Push Gateway</li>
                            <li>9093 - Steampipe Service</li>
                        </ul>

                    </div>

                    <div class="slide" id="slide-5">

                        <h2 class="slide__title"><span class="slide__num">6</span> OCI Configuration</h2>

                        <ul>
                            <li>After the successful Ansible execution, put your personal OCI configuration and SSH key
                                into the directory <code
                                    class="language-plaintext highlighter-rouge">/home/steampipe/.oci</code></li>
                            <li>Replace the dummy values</li>
                            <li>Update the file <code
                                    class="language-plaintext highlighter-rouge">/home/steampipe/config/oci.spc</code>
                                with the correct SSH key file name</li>
                        </ul>

                        <blockquote class="notice">
                            <p>Take care that owner and group of the OCI configuration file is <code
                                    class="language-plaintext highlighter-rouge">steampipe</code></p>
                        </blockquote>

                        <p>Example:</p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">pwd</span>
                    <span class="go">/home/steampipe/.oci
                    
                    </span><span class="gp">$</span><span class="w"> </span><span class="nb">ls</span> <span class="nt">-l</span>
                    <span class="go">total 8
                    -rw-r--r--. 1 steampipe steampipe  307 Aug  9 09:01 config
                    -rw-r--r--. 1 steampipe steampipe 1730 Aug  9 09:01 jurasuedfuss-20210809.pem
                    </span></code></pre>
                            </div>
                        </div>

                        <p>Restart the Docker container for Steampipe:</p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker stop steampipe
                    <span class="gp">$</span><span class="w"> </span>docker start steampipe
                    </code></pre>
                            </div>
                        </div>

                    </div>

                    <div class="slide" id="slide-6">

                        <h2 class="slide__title"><span class="slide__num">7</span> How to create the user for OCI access
                            - based on OCI CLI</h2>

                        <p>Next we create an OCI user for monitoring. An existing OCI CLI setup for an tenant
                            administrator is required to execute these steps. The required SSH key in PEM format can be
                            downloaded from the OCI web interface. The user, group, and policy can be created in web
                            interface as well.</p>

                        <p>All we need for Steampipe is the OCI config file for the new user and their SSH key in PEM
                            format.</p>

                        <h3 id="create-user">Create User</h3>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>oci iam user create <span class="nt">--name</span> oci_user_readonly <span class="nt">--description</span> <span class="s2">"OCI User with inspect all-resources."</span>
                    </code></pre>
                            </div>
                        </div>

                        <h3 id="create-group">Create Group</h3>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>oci iam group create <span class="nt">--name</span> oci_group_readonly <span class="nt">--description</span> <span class="s2">"OCI Group with inspect all-resources."</span>
                    </code></pre>
                            </div>
                        </div>

                        <h3 id="add-user-to-group">Add User to Group</h3>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>oci iam group add-user <span class="se">\</span>
                    <span class="nt">--user-id</span> &lt;your user OCID from created user above&gt; <span class="se">\</span>
                    <span class="nt">--group-id</span> &lt;your group OCID from created group above&gt;
                    </code></pre>
                            </div>
                        </div>

                        <h3 id="create-policy">Create Policy</h3>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>oci iam policy create <span class="se">\</span>
                    <span class="nt">--compartment-id</span> &lt;your tenancy OCID&gt; <span class="se">\</span>
                    <span class="nt">--name</span> oci_policy_readonly <span class="se">\</span>
                    <span class="nt">--description</span> <span class="s2">"OCI Policy with inspect all-resources."</span> <span class="se">\</span>
                    <span class="nt">--statements</span> <span class="s1">'[ "allow group oci_group_readonly to inspect all-resources on tenancy" ]'</span>
                    </code></pre>
                            </div>
                        </div>

                        <h3 id="add-api-key">Add API Key</h3>

                        <ol>
                            <li>
                                <p>Add your API key</p>

                                <picture class="">
                                    <source srcset="https://cool.devo.build/tutorials/assets/oci-monitoring-api-key.png 1x" />
                                    <img loading="lazy" src="https://cool.devo.build/tutorials/assets/oci-monitoring-api-key.png"
                                        data-original="https://cool.devo.build/tutorials/assets/oci-monitoring-api-key.png"
                                        data-at2x="https://cool.devo.build/tutorials/assets/oci-monitoring-api-key@2x.png" alt="OCI API Key 01"
                                        title="OCI API Key 01" />
                                </picture>
                            </li>
                            <li>
                                <p>Download the created private key in PEM format</p>

                                <picture class="">
                                    <source srcset="https://cool.devo.build/tutorials/assets/oci-monitoring-add-api-key.png 1x" />
                                    <img loading="lazy" src="https://cool.devo.build/tutorials/assets/oci-monitoring-add-api-key.png"
                                        data-original="https://cool.devo.build/tutorials/assets/oci-monitoring-add-api-key.png"
                                        data-at2x="https://cool.devo.build/tutorials/assets/oci-monitoring-add-api-key@2x.png" alt="OCI API Key 02"
                                        title="OCI API Key 02" />
                                </picture>
                            </li>
                            <li>
                                <p>Copy the configuration file preview. The values are used for the Steampipe OCI
                                    configuration</p>

                                <picture class="">
                                    <source srcset="https://cool.devo.build/tutorials/assets/oci-monitoring-config-file-prev.png 1x" />
                                    <img loading="lazy" src="https://cool.devo.build/tutorials/assets/oci-monitoring-config-file-prev.png"
                                        data-original="https://cool.devo.build/tutorials/assets/oci-monitoring-config-file-prev.png"
                                        data-at2x="https://cool.devo.build/tutorials/assets/oci-monitoring-config-file-prev@2x.png" alt="OCI API Key 03"
                                        title="OCI API Key 03" />
                                </picture>
                            </li>
                        </ol>

                    </div>

                    <div class="slide" id="slide-7">

                        <h2 class="slide__title"><span class="slide__num">8</span> Steampipe</h2>

                        <h3 id="oci-regions">OCI Regions</h3>

                        <p>To filter your regions, just edit the file <code
                                class="language-plaintext highlighter-rouge">/home/steampipe/config/oci.spc</code>.</p>

                        <p>For example:</p>

                        <div class="language-plaintext highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code>connection "oci_tenant_kestenholz" {
                      plugin                = "oci"
                      config_file_profile   = "DEFAULT"          # Name of the profile
                      config_path           = "~/.oci/config"    # Path to config file
                      regions               = ["eu-frankfurt-1" , "eu-zurich-1"] # List of regions
                    }
                    </code></pre>
                            </div>
                        </div>

                        <p>Here are some commands to verify if Steampipe is working as expected. Execute as <code
                                class="language-plaintext highlighter-rouge">root</code>:</p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> steampipe steampipe plugin list
                    <span class="go">+--------------------------------------------+---------+-----------------------+
                    | Name                                       | Version | Connections           |
                    +--------------------------------------------+---------+-----------------------+
                    | hub.steampipe.io/plugins/turbot/oci@latest | 0.1.0   | oci_tenant_kestenholz |
                    +--------------------------------------------+---------+-----------------------+
                    </span></code></pre>
                            </div>
                        </div>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> steampipe steampipe <span class="se">\</span>
                    query <span class="s2">"select display_name,shape,region from oci_core_instance where lifecycle_state='RUNNING';"</span>
                    <span class="go">+-----------------------------------+------------------------+----------------+
                    | display_name                      | shape                  | region         |
                    +-----------------------------------+------------------------+----------------+
                    | Instance-DB-1                     | VM.Standard1.2         | eu-frankfurt-1 |
                    | Instance-AS-1                     | VM.Standard1.1         | eu-frankfurt-1 |
                    +-----------------------------------+------------------------+----------------+
                    </span></code></pre>
                            </div>
                        </div>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> steampipe steampipe <span class="se">\</span>
                    query <span class="s2">"select key,title,status from oci_region where is_home_region=true;"</span>
                    <span class="go">+-----+----------------+--------+
                    | key | title          | status |
                    +-----+----------------+--------+
                    | FRA | eu-frankfurt-1 | READY  |
                    +-----+----------------+--------+
                    </span></code></pre>
                            </div>
                        </div>

                    </div>

                    <div class="slide" id="slide-8">

                        <h2 class="slide__title"><span class="slide__num">9</span> Python Example Scripts</h2>

                        <p>In the subdirectory <code
                                class="language-plaintext highlighter-rouge">/home/steampipe/py</code>, there are two
                            basic examples of how to get the data from the Steampipe PostgreSQL service to Python3. Feel
                            free to adapt the queries and files. Returned values are pushed to the Prometheus Gateway on
                            port 9091 for further usage.</p>

                        <table>
                            <thead>
                                <tr>
                                    <th>Script</th>
                                    <th>Purpose</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>pgsql-query-bv-zurich.py</td>
                                    <td>Summary of Block Volume in OCI Region Zurich</td>
                                </tr>
                                <tr>
                                    <td>pgsql-query-ci-running-zurich.py</td>
                                    <td>Summary of running Instances in OCI Region Zurich</td>
                                </tr>
                            </tbody>
                        </table>

                        <blockquote class="alert">
                            <p>Note: You’ll need to restart the Docker container before executing Python3 according this
                                error. This is something I’m working on!</p>
                        </blockquote>

                        <p>Manual execution and upload of the query result:</p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python3 pgsql-query-ci-running-zurich.py
                    <span class="gp">$</span><span class="w"> </span>python3 pgsql-query-bv-zurich.py
                    </code></pre>
                            </div>
                        </div>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="go">Something went wrong: no connection config loaded for connection 'oci'
                    </span></code></pre>
                            </div>
                        </div>

                        <p>Restarting Steampipe as <code class="language-plaintext highlighter-rouge">root</code>:</p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker stop steampipe
                    <span class="gp">$</span><span class="w"> </span>docker start steampipe
                    </code></pre>
                            </div>
                        </div>

                    </div>

                    <div class="slide" id="slide-9">

                        <h2 class="slide__title"><span class="slide__num">10</span> Prometheus Push Gateway</h2>

                        <p>According to the Python script, new data is loaded in Prometheus Push Gateway to port 9091
                            and scraped by Prometheus port 9090.</p>

                        <p>Checkout this example for the Protheus Gateway where data is loaded by jobs <code
                                class="language-plaintext highlighter-rouge">oci_blockvolume_ / _oci_compute</code>.</p>

                        <picture class="">
                            <source srcset="https://cool.devo.build/tutorials/assets/oci-monitoring-pushgateway.png 1x" />
                            <img loading="lazy" src="https://cool.devo.build/tutorials/assets/oci-monitoring-pushgateway.png"
                                data-original="https://cool.devo.build/tutorials/assets/oci-monitoring-pushgateway.png"
                                data-at2x="https://cool.devo.build/tutorials/assets/oci-monitoring-pushgateway@2x.png"
                                alt="OCI Prometheus Push Gateway 01" title="OCI Prometheus Push Gateway 01" />
                        </picture>

                    </div>

                    <div class="slide" id="slide-10">

                        <h2 class="slide__title"><span class="slide__num">11</span> Grafana</h2>

                        <p>Grafana is reachable by address <code
                                class="language-plaintext highlighter-rouge">your-machine-ip:3000</code>.</p>

                        <ul>
                            <li>Username: <code class="language-plaintext highlighter-rouge">admin</code></li>
                            <li>Password: <code class="language-plaintext highlighter-rouge">welcome1</code></li>
                        </ul>

                        <p>The Prometheus data source and a basic dashboard are deployed during the Grafana Docker setup
                            process. Here’s an example for dasboard <strong>OCI Demo - eu-zurich-1</strong>:</p>

                        <figure class="">
                            <picture>
                                <source srcset="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana.png 1x" />
                                <img loading="lazy" src="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana.png"
                                    data-original="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana.png"
                                    data-at2x="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana@2x.png" title="Prometheus data source"
                                    alt="Prometheus data source" />
                            </picture>
                            <figcaption>Prometheus data source</figcaption>
                        </figure>

                        <figure class="">
                            <picture>
                                <source srcset="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana-demo.png 1x" />
                                <img loading="lazy" src="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana-demo.png"
                                    data-original="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana-demo.png"
                                    data-at2x="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana-demo@2x.png"
                                    title="Sample dashboard OCI Demo" alt="Sample dashboard OCI Demo" />
                            </picture>
                            <figcaption>Sample dashboard OCI Demo</figcaption>
                        </figure>

                        <p>Here you can see the pushed metric from the Python script by name:</p>

                        <picture class="">
                            <source srcset="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana-metrics-browser.png 1x" />
                            <img loading="lazy" src="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana-metrics-browser.png"
                                data-original="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana-metrics-browser.png"
                                data-at2x="https://cool.devo.build/tutorials/assets/oci-monitoring-grafana-metrics-browser@2x.png"
                                alt="Metric from Python script" title="Metric from Python script" />
                        </picture>

                    </div>

                    <div class="slide" id="slide-11">

                        <h2 class="slide__title"><span class="slide__num">12</span> Troubleshooting</h2>

                        <h3 id="docker-logs">Docker Logs</h3>

                        <p>To verify that Steampipe is running properly:</p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker logs steampipe
                    </code></pre>
                            </div>
                        </div>

                        <h3 id="steampipe-access-logs">Steampipe Access Logs</h3>

                        <p>The foreign data wrapper logs are stored locally — not in the Docker container — in the
                            directory <code class="language-plaintext highlighter-rouge">/home/steampipe/logs</code>:
                        </p>

                        <div class="language-console highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="go">drwx------. 11 steampipe steampipe     173 Aug  9 17:18 ..
                    -rw-------.  1      9193 root       756701 Aug  9 19:57 database-2021-08-09.log
                    drwxrwxr-x.  2 steampipe root           68 Aug 10 02:00 .
                    -rw-------.  1      9193 root      3411203 Aug 10 07:19 database-2021-08-10.log
                    </span></code></pre>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- /cc01v0 -->


            </main>
        </div>
    </div>
</section> <!-- /F19v0 -->