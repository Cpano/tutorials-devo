<!--========================================CALENDAR ICON========================================-->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">

<link rel="stylesheet" href="https://cpano.github.io/tutorials-devo/public/css/TutorialsStyles.css">


<!--========================================HEADER========================================-->
<!-- CC01v0 -->
<section style="background-image:url(/a/devo/images/cc01-weblogic-hero-banner.jpg);" class="cc01 cc01v0  txtlight cpad">
    <div class="cc01w1 cwidth">

        <h1>Creating an E-commerce Site with Oracle Coherence CE and Micronaut</h1>
        <p>Building stateful, microservices based application that uses Oracle Coherence CE as a scalable embedded data
            store, and Micronaut Framework as an application framework.</p>

        <div style="display: flex; color: white;">
            <p class="page__date" style="margin-right: 25px;"><strong><i class="fas fa-user fa-calendar-alt"
                        aria-hidden="true"></i>
                    Author: </strong>
                Aleks Seovic
            </p>

            <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong>
                <time>January 14, 2022</time>
            </p>

        </div>

    </div>
</section>
<!-- /CC01v0 -->


<!--========================================END BLOCK CODE STYLES========================================-->

<!-- F19v0 -->
<section class="f19 f19v0 cpad">
    <div class="f19w1 cwidth">
        <div class="f19w2 f19-2col">
            <div class="f19col f19side">
                <!-- S20v0 -->
                <section class="s20 s20v0 cpad" data-ocomid="s20" data-trackas="s20">
                    <div class="s20w1 cwidth">
                        <div class="col-w1">

                            <h3>About Aleks</h3>

                            <!--Social Icons-->
                            <div class="author__urls-wrapper" style="margin-bottom: 15px;">
                                <ul class="author__urls social-icons">
                                    <li>
                                        <a href="https://github.com/aseovic" itemprop="sameAs"
                                            rel="nofollow noopener noreferrer" target="_blank">
                                            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span
                                                class="label">GitHub</span>
                                        </a>
                                    </li>
                                </ul>
                            </div><br><br>
                            <!-- End Social Icons-->


                            <p><strong>More tutorials from this author: <br> </strong> <span class="tags">

                                    <a class="animated-link tag2" href="/tutorials/deploy-apache-superset-with-mds-on-oci/">Deploy Apache Superset with MySQL Database
                                        Service on Oracle Cloud Infrastructure</a>

                                </span>
                            </p>

                            <!--Tags-->
                            <h3>Tags</h3>
                            <p> <span class="tags">

                                    <a class="animated-link tag" href="#">analytics</a>
                                    <a class="animated-link tag" href="#">oci</a>

                                </span>
                            </p>

                            <h3></h3>
                            <a href="https://developer.oracle.com/tutorials">
                                <p class="page__date" style="margin-right: 25px;"><strong>
                                        Back to tutorials
                                    </strong>
                                </p>
                            </a>

                        </div>
                    </div>
                </section>
                <!-- /S20v0 -->
            </div>
            <!-- SET UP -->
            <main class="f19col f19main">
                <!-- cc01v0 -->

                <section class="cc01 cc01v0 cpad" id="link1">
                    <div class="cc01w1 cwidth">

                        <h2>Welcome!</h2>
                        <p>In this tutorial, I’ll walk you through creating a stateful, microservices based application
                            that uses <a href="https://coherence.community/">Oracle Coherence CE</a> as a scalable
                            embedded data store, and <a href="https://micronaut.io/">Micronaut Framework</a> as an
                            application framework.</p>

                        <p>Ultimately, the application we’re building is an online store that sells socks, and is based
                            on the <a href="https://microservices-demo.github.io">SockShop Microservices Demo</a>
                            originally written and
                            published under Apache 2.0 license by <a href="https://go.weave.works/socks">Weaveworks</a>.
                        </p>

                        <p>You can see a working demo of the original application <a
                                href="http://socks.weave.works/">here</a>.</p>

                        <p>This demo still uses the original front end implementation provided by Weaveworks, but all
                            back end services
                            have been re-implemented from scratch using Micronaut Framework and Oracle Coherence in
                            order to showcase
                            the many features of the <a
                                href="https://github.com/micronaut-projects/micronaut-coherence">Coherence
                                Micronaut</a> integration.</p>

                        <p>We also provide the implementations of the same application that uses Spring Boot or Helidon
                            as the application framework, in case one of those is your framework of choice.</p>

                        <ul>
                            <li><a href="https://github.com/oracle/coherence-spring-sockshop-sample">Coherence Spring
                                    Sock Shop</a></li>
                            <li><a href="https://github.com/oracle/coherence-helidon-sockshop-sample">Coherence Helidon
                                    Sock Shop</a>
                            </li>
                        </ul>

                        <h2 id="how-can-i-get-started-on-oci">How can I get started on OCI?</h2>

                        <p>Remember that you can always sign up for free with OCI! Your Oracle Cloud account provides a
                            number of Always
                            Free services and a Free Trial with US$300 of free credit to use on all eligible OCI
                            services for up to 30
                            days. These Always Free services are available for an <strong>unlimited</strong> period of
                            time. The Free
                            Trial services may be used until your US$300 of free credits are consumed or the 30 days has
                            expired,
                            whichever comes first. You can <a
                                href="https://signup.cloud.oracle.com/?source=:ex:tb:::::WWMK220110P00039:WW_FY22_DevRel_DotBuild&SC=:ex:tb:::::WWMK220110P00039:WW_FY22_DevRel_DotBuild&pcode=WWMK220110P00039">sign
                                up here for free</a>.</p>

                        <h1 id="table-of-contents">Table of Contents</h1>

                        <ul>
                            <li><a href="#architecture">Architecture</a></li>
                            <li><a href="#project-structure">Project Structure</a></li>
                            <li><a href="#pre-requisites">Pre-Requisites</a></li>
                            <li><a href="#quick-start">Quick Start</a></li>
                            <li><a
                                    href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/doc/complete-application-deployment.md">Complete
                                    Application Deployment</a></li>
                            <li><a
                                    href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/doc/development.md">Development</a>
                            </li>
                            <li><a href="#license">License</a></li>
                        </ul>

                        <h2 id="architecture">Architecture</h2>

                        <p>The application consists of six back end services (rewritten from the ground up on top of
                            Micronaut,
                            implementing the API that the legacy <code
                                class="language-plaintext highlighter-rouge">front-end</code>
                            service expects).</p>

                        <picture class="">
                            <source
                                srcset="https://cool.devo.build/tutorials/assets/coherence-micronaut-diagram.png 1x" />
                            <img loading="lazy"
                                src="https://cool.devo.build/tutorials/assets/coherence-micronaut-diagram.png"
                                data-original="https://cool.devo.build/tutorials/assets/coherence-micronaut-diagram.png"
                                data-at2x="https://cool.devo.build/tutorials/assets/coherence-micronaut-diagram@2x.png"
                                alt="Network diagram of the sock shop" title="Network diagram of the sock shop" />
                        </picture>

                        <p>Find more details for each service by following these links:</p>

                        <ul>
                            <li>
                                <p><strong><a
                                            href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/catalog">Product
                                            Catalog</a></strong>, which provides REST API that allows you to search
                                    product catalog and
                                    retrieve individual product details;</p>
                            </li>
                            <li>
                                <p><strong><a
                                            href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/carts">Shopping
                                            Cart</a></strong>, which provides REST API that allows you to manage
                                    customers’ shopping
                                    carts;</p>
                            </li>
                            <li>
                                <p><strong><a
                                            href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/orders">Orders</a></strong>,
                                    which provides REST API that allows customers to place orders;</p>
                            </li>
                            <li>
                                <p><strong><a
                                            href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/payment">Payment</a></strong>,
                                    which provides REST API that allows you to process payments;</p>
                            </li>
                            <li>
                                <p><strong><a
                                            href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/shipping">Shipping</a></strong>,
                                    which provides REST API that allows you to ship orders and track shipments;</p>
                            </li>
                            <li>
                                <p><strong><a
                                            href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/users">Users</a></strong>,
                                    which provides REST API that allows you to manage customer information and provides
                                    registration and
                                    authentication functionality for the customers.</p>
                            </li>
                        </ul>

                        <h2 id="project-structure">Project Structure</h2>

                        <p>The main <a
                                href="https://github.com/oracle/coherence-micronaut-sockshop-sample/">Sock
                                Shop</a>
                            repository also contains Kubernetes deployment files for the whole application, top-level
                            POM file which
                            allows you to easily build the whole project and import it into your favorite IDE.</p>

                        <h2 id="quick-start">Quick Start</h2>

                        <p>Kubernetes scripts depend on Kustomize, so make sure that you have a newer version of <code
                                class="language-plaintext highlighter-rouge">kubectl</code> that supports it (at least
                            1.16 or above).
                        </p>

                        <p>The easiest way to try the demo is to use the Kubernetes deployment scripts from this repo.
                        </p>

                        <p>If you do, you can simply run the following command from the <code
                                class="language-plaintext highlighter-rouge">coherence-micronaut-sockshop-sample</code>
                            directory.</p>

                        <h3 id="install-the-coherence-operator">Install the Coherence Operator</h3>

                        <p>Install the Coherence Operator using the instructions in the <a
                                href="https://oracle.github.io/coherence-operator/docs/latest/#/about/03_quickstart">Coherence
                                Operator
                                Quick Start</a> documentation.</p>

                        <h3 id="installing-a-back-end">Installing a Back-end</h3>

                        <p>Create a namespace in Kubernetes called <code
                                class="language-plaintext highlighter-rouge">sockshop</code>.
                        </p>

                        <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="nv">$ </span>kubectl create namespace sockshop
            </code></pre>
                            </div>
                        </div>

                        <p>Install the back-end into the <code
                                class="language-plaintext highlighter-rouge">sockshop</code> namespace.
                        </p>

                        <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nt">--namespace</span> sockshop apply <span class="nt">-k</span> k8s/coherence 
            </code></pre>
                            </div>
                        </div>

                        <p>The <code class="language-plaintext highlighter-rouge">-k</code> parameter above will use
                            <code class="language-plaintext highlighter-rouge">kubectl</code> with <code
                                class="language-plaintext highlighter-rouge">kustomize</code> to merge all the files
                            under the specified
                            directory and create all Kubernetes resources defined by them, such as deployments and
                            services for each
                            microservice.</p>

                        <h3 id="optional-install-the-original-weavesocks-front-end">(Optional) Install the Original
                            WeaveSocks Front End
                        </h3>

                        <blockquote>
                            <p>Warning: The original WeaveSocks Front End has a few bugs, as well as some security
                                issues, and it hasn’t
                                been actively maintained for a few years. However, if you want to deploy it nevertheless
                                to see how it
                                interacts with our back-end services, please follow the steps below.</p>
                        </blockquote>

                        <p>Install the <code class="language-plaintext highlighter-rouge">front-end</code> service by
                            running the
                            following command:</p>

                        <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="nv">$ </span>kubectl apply <span class="nt">-f</span> k8s/optional/original-front-end.yaml <span class="nt">--namespace</span> sockshop
            </code></pre>
                            </div>
                        </div>

                        <p>Port-forward to the <code class="language-plaintext highlighter-rouge">front-end</code> UI
                            using the
                            following processes:</p>

                        <p><strong>Mac/Linux</strong></p>

                        <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="nv">$ </span>kubectl port-forward <span class="nt">--namespace</span> sockshop service/front-end &lt;localPort&gt;:80
            </code></pre>
                            </div>
                        </div>

                        <p><strong>Windows</strong></p>

                        <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="nv">$ </span>kubectl port-forward <span class="nt">--namespace</span> sockshop service/front-end &lt;localPort&gt;:80
            </code></pre>
                            </div>
                        </div>

                        <blockquote>
                            <p>Note: If you have installed into a namespace then add the <code
                                    class="language-plaintext highlighter-rouge">--namespace</code> option to all <code
                                    class="language-plaintext highlighter-rouge">kubectl</code> commands in these
                                instructions.</p>
                        </blockquote>

                        <p>You should be able to access the home page for the application by pointing your browser to
                            <code
                                class="language-plaintext highlighter-rouge">http://localhost:&lt;localPort&gt;/</code>.
                        </p>

                        <p>You should then be able to browse the product catalog, add products to shopping cart,
                            register as a new user,
                            place an order, and browse order history, among other actions</p>

                        <p>Once you are finished, you can clean up the environment by executing the following:</p>

                        <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="nv">$ </span>kubectl delete <span class="nt">-f</span> k8s/optional/original-front-end.yaml <span class="nt">--namespace</span> sockshop
            <span class="nv">$ </span>kubectl delete <span class="nt">-k</span> k8s/coherence <span class="nt">--namespace</span> sockshop
            </code></pre>
                            </div>
                        </div>

                        <h3 id="scale-back-end">Scale Back-End</h3>

                        <p>If you wish to scale the back-end, issue the following command:</p>

                        <p>Scale only the orders microservice</p>

                        <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nt">--namespace</span> sockshop scale coherence orders <span class="nt">--replicas</span><span class="o">=</span>3
            </code></pre>
                            </div>
                        </div>

                        <p>Or, alternatively, scale all the microservices</p>

                        <div class="language-bash highlighter-rouge">
                            <div class="highlight">
                                <pre class="highlight"><code><span class="nv">$ </span><span class="k">for </span>name <span class="k">in </span>carts catalog orders payment shipping <span class="nb">users
                </span><span class="k">do </span>kubectl <span class="nt">--namespace</span> sockshop scale coherence <span class="nv">$name</span> <span class="nt">--replicas</span><span class="o">=</span>3
            <span class="k">done</span>
            </code></pre>
                            </div>
                        </div>

                        <h2 id="complete-application-deployment">Complete Application Deployment</h2>

                        <p>The Quick Start shows how you can run the application locally, but that may not be enough if
                            you want to
                            experiment with scaling individual services. Look at tracing data in Jaeger, monitor
                            services via Prometheus
                            and Grafana, or make API calls directly using Swagger UI.</p>

                        <p>To do all of the above, you need to deploy the services into a managed Kubernetes cluster in
                            the cloud, by
                            following the same set of steps described above (except for port forwarding, which is not
                            necessary), and
                            performing a few additional steps.</p>

                        <p><a
                                href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/doc/complete-application-deployment.md">Go
                                to Complete Application Deployment section</a></p>

                        <h2 id="development">Development</h2>

                        <p>If you want to modify the demo, you will need to check out the code for the project, build it
                            locally, and (optionally) push new container images to the repository of your choice.</p>

                        <p><a
                                href="https://github.com/oracle/coherence-micronaut-sockshop-sample/blob/master/doc/development.md">Go
                                to
                                Development section</a></p>

                    </div>
                </section>
                <!-- /CC01v0 -->

            </main>
        </div>
    </div>
</section>
<!-- /F19v0 -->